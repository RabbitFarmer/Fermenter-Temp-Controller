<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ system_settings.brewery_name }} - Batch History</title>
  <link rel="stylesheet" href="/static/styles.css">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    .page { max-width: 1200px; margin:20px auto; padding:18px; background:#fff; border-radius:8px; box-shadow:0 2px 12px rgba(0,0,0,0.06); }
    .header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
    .batch-table { width: 100%; border-collapse: collapse; margin-top: 16px; }
    .batch-table th { background: #0b8a2e; color: white; padding: 12px; text-align: left; font-weight: 700; }
    .batch-table td { padding: 10px 12px; border-bottom: 1px solid #ddd; }
    .batch-table tr:hover { background: #f6f9f6; }
    .batch-link { text-decoration: none; color: #007bff; font-weight: 600; }
    .batch-link:hover { text-decoration: underline; }
    .no-batches { text-align: center; padding: 40px; color: #666; font-size: 16px; }
    .back-button { display: inline-block; padding: 10px 16px; background: #0b8a2e; color: white; text-decoration: none; border-radius: 6px; font-weight: 700; }
    .back-button:hover { background: #096b24; }
    .tilt-color-badge { display: inline-block; padding: 4px 10px; border-radius: 4px; font-weight: 700; color: white; font-size: 12px; }
  </style>
</head>
<body>
  <div class="page-container">
    <header class="site-header">
      <nav class="config-ribbon">
        <a href="/">Dashboard</a>
        <a href="/tilt_config">Tilt Configuration</a>
        <a href="/temp_config">Temperature Control</a>
      </nav>
      <h1 class="dashboard-title">Batch History</h1>
    </header>

    <main class="page" role="main">
      <div class="header">
        <div>
          <h2 style="margin:0;">Historical Batches</h2>
          <p style="color:#666; margin:4px 0 0 0;">Select a batch to view detailed fermentation data and charts</p>
        </div>
        <a href="/" class="back-button">← Back to Dashboard</a>
      </div>

      {% if batches %}
        <table class="batch-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Beer Name</th>
              <th>Batch Name</th>
              <th>Tilt Color</th>
              <th>Samples</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for batch in batches %}
              <tr>
                <td>{{ batch.created_date or '--' }}</td>
                <td>{{ batch.beer_name or 'Unknown' }}</td>
                <td>{{ batch.batch_name or 'Unknown' }}</td>
                <td>
                  {% if batch.tilt_color %}
                    <span class="tilt-color-badge" style="background-color: {{ COLOR_MAP.get(batch.tilt_color, '#333') }};">
                      {{ batch.tilt_color }}
                    </span>
                  {% else %}
                    --
                  {% endif %}
                </td>
                <td>{{ batch.sample_count }}</td>
                <td>
                  <a href="/batch_history/{{ batch.brewid }}" class="batch-link">View Details →</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <div class="no-batches">
          <p>No batch history found.</p>
          <p style="font-size:14px; color:#888;">Batches will appear here once you start logging fermentation data.</p>
        </div>
      {% endif %}
    </main>
  </div>
</body>
</html>
